<!doctype>

<video></video>
<button>Snap</button>
<canvas></canvas>

<script>

var video = document.querySelector("video");
var button = document.querySelector("button");
var canvas = document.querySelector("canvas");

var ctx = canvas.getContext("2d");

button.addEventListener("click", function(e) {
	e.preventDefault();
	ctx.drawImage(video, 0, 0, video.videoWidth, video.videoHeight);
}, false);

video.addEventListener("canplay", function(e) {
	canvas.width = video.videoWidth;
	canvas.height = video.videoHeight;
}, false);

navigator.webkitGetUserMedia(
	{video: true, audio: false},
	function(stream) {
		video.src = window.URL.createObjectURL(stream);
		video.play();
	},
	function(err) {
		console.log(err);
	}
);

</script>