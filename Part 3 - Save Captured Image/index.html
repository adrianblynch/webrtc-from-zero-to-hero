<!doctype>

<video></video>
<button class="snap">Snap</button>
<canvas></canvas>
<button class="save">Save</button>

<script>

var video = document.querySelector("video");
var snapButton = document.querySelector("snapButton");
var canvas = document.querySelector("canvas");
var saveButton = document.querySelector("saveButton");

var ctx = canvas.getContext("2d");

snapButton.addEventListener("click", function() {
	ctx.drawImage(video, 0, 0, video.videoWidth, video.videoHeight);
}, false);

video.addEventListener("canplay", function() {
	canvas.width = video.videoWidth;
	canvas.height = video.videoHeight;
}, false);

navigator.webkitGetUserMedia(
	{
		video: {
			mandatory: {
				maxWidth: 320,
				maxHeight: 180
			}
		},
		audio: false
	},
	function(stream) {
		video.src = window.URL.createObjectURL(stream);
		video.play();
	},
	function(err) {
		console.log(err);
	}
);

</script>